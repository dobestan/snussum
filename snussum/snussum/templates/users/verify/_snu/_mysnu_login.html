<div class="page-header text-center">
  <h1>mySNU x 로그인 <small><span class="label label-success">Beta</span></small></h1>
  <p>서울대학교 포털 "마이스누" 계정을 통해서 서울대학교 인증을 할 수 있습니다.</p>
</div>

<div class="col-md-4 col-md-offset-4">
  <div class="form-group">
    <label for="">마이스누 아이디</label>
    <div class="input-group">
      <input id="mysnu-username" type="text" value="" name="" class="form-control"/>
      <div class="input-group-addon">@snu.ac.kr</div>
    </div>
  </div>
  <div class="form-group">
    <label for="">마이스누 비밀번호</label>
    <input id="mysnu-password" type="password" value="" name="" class="form-control"/>
  </div>

    <input id="mysnu-login-button" type="submit" value="마이스누 로그인" />
</div>

<script type="text/javascript" charset="utf-8">
$(document).ready(function(){
  $("input#mysnu-login-button").click(function(){
    $.notify(
      {icon: "fa fa-lock" ,message: "마이스누 로그인 인증이 시작되었습니다. \
      입력하신 아이디, 비밀번호는 공인 인증서(SSL)을 통해서 암호화됩니다."},
      {type: 'success'}
    )

    var username = $("input#mysnu-username").val();
    var password = $("input#mysnu-password").val();

    var data = {
      'username': username,
      'password': password
    }

    $.ajax({
      url: '/api/users/mysnu/login/',
      type: 'POST',
      data: data,
      success: function(result){
        $.notify(
          {message: "마이스누 로그인 인증에 성공하였습니다."},
          {type: 'success'}
        );
      },
      error: function(result){
        $.notify(
          {
            icon: "fa fa-exclamation-triangle",
            message: "마이스누 로그인 인증에 실패하였습니다.\
            지속적으로 동일한 문제가 발생하는 경우 다른 인증 방법을 통해서\
            인증해주시면 감사하겠습니다."
          },
          {type: 'danger'}
        );
      }
    });
  })
});
</script>
