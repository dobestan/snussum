{% extends "_base.html" %}

{% block title %}회원가입{% endblock %}

{% block content %}
<section id="signup">

  <section class="container">
    <div class="row">
      <div class="page-header text-center">
        <h1>회원가입 <small>하고 썸타기</small></h1>
        <p>서울대학생의, 서울대학생에 의한, 서울대학생을 위한 소개팅</p>
      </div>
    </div>
  </section>

  <section class="container">
    <div class="row">
      <div class="col-md-4 col-md-offset-4 col-sm-12 col-xs-12">
        <section>
          <a href="{% url "social:begin" backend="kakao" %}" class="text-center social-login social-login-kakao"><i class="fa fa-comment"></i>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;카카오 계정으로 회원가입</a>
          <a href="{% url "social:begin" backend="facebook" %}" class="text-center social-login social-login-facebook"><i class="fa fa-facebook"></i>&nbsp;&nbsp;&nbsp;&nbsp;페이스북 계정으로 회원가입</a>
        </section>

        <hr />

        <form action="{% url 'users:signup' %}" method="post" accept-charset="utf-8">{% csrf_token %}
          {% if form.errors %}
            <p class="small danger">
              * 입력하신 정보가 올바르지 않습니다. 불편하시더라도 다시 한번 확인 부탁드립니다.
            </p>
          {% endif %}
          <div class="form-group">
            <label for="">아이디</label> <span class="small danger">* 아이디를 정확하게 입력해주세요.</span>
            <input id="id_username" class="form-control" maxlength="30" name="username" type="text" placeholder="아이디" required>
          </div>
          <div class="form-group">
            <label for="">비밀번호</label> <span class="small danger">* 비밀번호를 정확하게 입력해주세요.</span>

            <input id="id_password1" class="form-control" name="password1" type="password" placeholder="비밀번호" required>
          </div>
          <div class="form-group">
            <label for="">비밀번호 확인</label> <span class="small danger">* 비밀번호가 일치하지 않습니다.</span> <span class="small success">* 입력하신 비밀번호가 일치합니다.</span>
            <input id="id_password2" class="form-control" name="password2" type="password" placeholder="비밀번호 확인" required>
          </div>
          <button type="submit" class="text-center btn-snussum-darkgrey">
            <i class="fa fa-sign-in"></i>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;스누썸 계정으로 회원가입
          </button>
        </form>
      </div>
    </div>
  </section>
  
</section>

<script type="text/javascript" charset="utf-8">
$(document).ready(function(){
  var input_username = $("section#signup").find("input#id_username");
  var input_password1 = $("section#signup").find("input#id_password1");
  var input_password2 = $("section#signup").find("input#id_password2");

  $(input_username).on('input', function(){
    var danger_msg = $(this).parent(".form-group").find(".danger");
    if ($(this).val().length == 0){
      danger_msg.show();
    } else {
      danger_msg.hide();
    }
  });

  $(input_password1).on('input', function(){
    var danger_msg = $(this).parent(".form-group").find(".danger");
    if ($(this).val().length == 0){
      danger_msg.show();
    } else {
      danger_msg.hide();
    }
  });

  $(input_password2).on('input', function(){
    var danger_msg = $(this).parent(".form-group").find(".danger");
    var success_msg = $(this).parent(".form-group").find(".success");

    var input_password1_value = $(input_password1).val();
    var input_password2_value = $(this).val();

    if (input_password1_value === input_password2_value){
      $(danger_msg).hide();
      $(success_msg).show();
    } else {
      $(success_msg).hide();
      $(danger_msg).show();
    }
  });
});
</script>
{% endblock %}
